{"componentChunkName":"component---node-modules-nehalist-gatsby-theme-nehalem-src-templates-post-tsx","path":"/reacthasuratodo","webpackCompilationHash":"048f878b188dd319ccc7","result":{"data":{"post":{"headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"Building a React Todo App with the Hasura GraphQL Engine","path":"/reacthasuratodo","tags":["GraphQL","React","Hasura","Javascript","GitHub"],"excerpt":"If you are reading this, then it means that you’re probably interested in learning Hasura and React. Well if that’s the case then you just landed at the perfect location. You might be having all sorts of questions like, “What’s GraphQL?”, “What’s Hasura?” or more importantly, “Why are we using it?”. Well fear not, everything will be cleared by the time you complete reading this blog.","created":"2018-10-05T00:00:00.000Z","createdPretty":"05 October, 2018","updated":"2018-10-05T00:00:00.000Z","updatedPretty":"05 October, 2018","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAMFAQQG/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAG/iiqZvoWFxBqhYg//xAAaEAACAwEBAAAAAAAAAAAAAAACAwABBBIQ/9oACAEBAAEFAoBUXmhnC87eGRqhbQ5FUU//xAAXEQADAQAAAAAAAAAAAAAAAAABAhEg/9oACAEDAQE/AQlFx//EABURAQEAAAAAAAAAAAAAAAAAABEg/9oACAECAQE/AWP/xAAaEAACAgMAAAAAAAAAAAAAAAABEQAQAiEx/9oACAEBAAY/AoUXRXZvLR66WUaNf//EABoQAQEAAwEBAAAAAAAAAAAAAAERABAhMVH/2gAIAQEAAT8hxjyGOukRnMm1S4+tDBs8cHUI3rr/2gAMAwEAAgADAAAAEKDPfP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QCP/EABYRAQEBAAAAAAAAAAAAAAAAAAERIP/aAAgBAgEBPxBlmP/EABsQAQADAAMBAAAAAAAAAAAAAAEAESEQMVGh/9oACAEBAAE/EJ8Y2PD6phuB63M2ruU6rPe4Ng+xvdtg0kEYcW7Tj//Z","aspectRatio":1,"src":"/static/bbf525ebc002569466680075c4abd631/57238/cover.jpg","srcSet":"/static/bbf525ebc002569466680075c4abd631/5398f/cover.jpg 200w,\n/static/bbf525ebc002569466680075c4abd631/26a4d/cover.jpg 400w,\n/static/bbf525ebc002569466680075c4abd631/57238/cover.jpg 800w,\n/static/bbf525ebc002569466680075c4abd631/23dde/cover.jpg 1200w,\n/static/bbf525ebc002569466680075c4abd631/526a4/cover.jpg 1600w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"html":"<p>If you are reading this, then it means that you’re probably interested in learning Hasura and React. Well if that’s the case then you just landed at the perfect location. You might be having all sorts of questions like, “What’s GraphQL”, “What’s Hasura?” or more importantly, “Why are we using it?”. Well fear not, everything will be cleared by the time you complete reading this blog. So let’s get started!</p>\n<p>This tutorial assumes that you have basic knowledge of the React framework. If you are totally new to React, I would suggest going through the <a href=\"https://reactjs.org/docs/hello-world.html\">hello world app of React</a> first before continuing further.</p>\n<p>The code samples in this tutorial are for the main relevant part only, but if you intend to copy the code then make sure to import relevant libraries and components also and export the Component created. If you want the full code, you can take a look at the <a href=\"https://github.com/Anupam-dagar/react-Hasura-todo\">code repository</a> for this blog.</p>\n<h2 id=\"what-is-hasura\"><a href=\"#what-is-hasura\" aria-label=\"what is hasura permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>What is Hasura?</strong></h2>\n<p><a href=\"https://hasura.io/\">Hasura</a> is a <a href=\"https://en.wikipedia.org/wiki/Platform_as_a_service\">PaaS</a> with BaaS components. PaaS stands for platform as a service. It allows developers, IT professionals, and business leaders to develop, test, and deploy the next generation of applications in the cloud in a secure, cost-effective manner that speeds time to market and increases competitive advantage.</p>\n<p>BaaS stands for Backend as a service. It is a model for providing web app and mobile app developers with a way to link their applications to backend cloud storage and APIs exposed by back end applications while also providing features such as user management, push notifications, and integration with social networking services.</p>\n<h2 id=\"graphql-what-is-all-the-fuss-about-it\"><a href=\"#graphql-what-is-all-the-fuss-about-it\" aria-label=\"graphql what is all the fuss about it permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>GraphQL, what is all the fuss about it?</strong></h2>\n<p>GraphQL is a query language for APIs and a runtime for fulfilling those queries with your existing data. GraphQL provides a complete and understandable description of the data in your API, gives clients the power to ask for exactly what they need and nothing more, makes it easier to evolve APIs over time, and enables powerful developer tools.</p>\n<h2 id=\"hasuras-graphql-engine\"><a href=\"#hasuras-graphql-engine\" aria-label=\"hasuras graphql engine permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Hasura’s GraphQL Engine</strong></h2>\n<p>The Hasura GraphQL Engine is an extremely lightweight, high-performance product that gives you instant realtime GraphQL APIs on a Postgres database. This can be used to quickly build new applications on Postgres or fast-track the move to GraphQL for existing applications on Postgres.</p>\n<p>It comes with a UI that lets you create and view tables on your database and make GraphQL queries using the embedded GraphiQL interface.</p>\n<h2 id=\"what-we-will-be-building\"><a href=\"#what-we-will-be-building\" aria-label=\"what we will be building permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>What we will be building</strong></h2>\n<p>We will be creating a simple todo app which lets a user sign up or login and then manage todos by (CRUD) creating them, marking them as complete, or deleting them as necessary. Users will also be able to see his all todos. Visit <a href=\"https://reacthasuratodo.herokuapp.com/\">https://reacthasuratodo.herokuapp.com/</a> to see a demo of what we will be building.</p>\n<h2 id=\"setting-up-your-developer-environment\"><a href=\"#setting-up-your-developer-environment\" aria-label=\"setting up your developer environment permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Setting up your developer environment</strong></h2>\n<ol>\n<li>Hasura GraphQL server</li>\n<li>Node</li>\n<li>npm or yarn</li>\n<li>create-react-app</li>\n<li>Deploy your Hasura GraphQL engine to a server which will be used as an endpoint to make queries. Setting up a Hasura GraphQL takes at most 1 minute. It can be easily deployed to Heroku via its one-click deploy to Heroku method. <a href=\"https://heroku.com/deploy?template=https://github.com/hasura/graphql-engine-heroku\">Click here to deploy your Hasura GraphQL Engine to a Heroku server</a>. Give your Heroku app a name and click on deploy app.<br>\nYour Hasura GraphQL UI will be live at appname.herokuapp.com</li>\n</ol>\n<p><img src=\"https://miro.medium.com/max/2400/1*4By1MEaHlUAZyi3iW_73Nw.png\"></p>\n<center>Hasura One Click Deploy to Heroku</center>\n<p>To secure your Hasura graphql server, add an environment variable <code class=\"language-text\">HASURA_GRAPHQL_ACCESS_KEY</code> on Heroku and keep its value to something you can remember. This access key will be asked whenever you try to login on the Hasura Graphql server.</p>\n<p>2. Install node and npm on your system.</p>\n<ul>\n<li>On a Linux-based OS:</li>\n</ul>\n<blockquote>\n<p>curl-sL <a href=\"https://deb.nodesource.com/setup_8.x\">https://deb.nodesource.com/setup_8.x</a> | sudo bash -<br>\nsudo apt install nodejs</p>\n</blockquote>\n<p>The above command installs both node and npm in your system.</p>\n<ul>\n<li>On Windows:<br>\nDownload the relevant package from <a href=\"https://nodejs.org/en/download/\">here</a> and install it.</li>\n</ul>\n<p>3. Install create-react-app (I’ll be using yarn instead of npm)</p>\n<ul>\n<li>create-react-app is a script developed by Facebook to set up a react app with all the necessary directory structure and node_modules.</li>\n<li>Install create-react-app using the following command.</li>\n</ul>\n<blockquote>\n<p><strong>yarn global add create-react-app</strong></p>\n</blockquote>\n<p>This installs create-react-app globally on your system.</p>\n<h2 id=\"creating-a-react-app\"><a href=\"#creating-a-react-app\" aria-label=\"creating a react app permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Creating a react app</strong></h2>\n<p>Create a new react app using <code class=\"language-text\">create-react-app reacthasuratodo</code><br>\nOn successful completion of the command, you will see a similar output as in the image. Now open your code editor in the react app directory you just created.</p>\n<p><img src=\"https://miro.medium.com/max/2400/1*zRFDjJF6_iPu1fj-FJUlwQ.png\"></p>\n<center>Setting up a React app</center>\n<p>Change your working directory to react app directory and run <code class=\"language-text\">yarn start</code>. The server will start and you should be able to see a welcome to react screen on <a href=\"http://localhost:3000.\">http://localhost:3000</a>. This means your React app is running fine.</p>\n<p><img src=\"https://miro.medium.com/max/2400/1*EN-R8yaaft52LJaYTV1hZQ.png\"></p>\n<center>Live React app</center>\n<p>I’ll be using the <code class=\"language-text\">react-bootstrap</code> package for the styling so install the package using <code class=\"language-text\">yarn add react-bootstrap</code>. Make sure to add the Bootstrap stylesheet in <code class=\"language-text\">/public/index.html</code>. Complete documentation for react-bootstrap package can be found <a href=\"https://react-bootstrap.github.io/getting-started/introduction\">here</a>.</p>\n<h2 id=\"using-auth0-as-authentication-for-the-todo-app\"><a href=\"#using-auth0-as-authentication-for-the-todo-app\" aria-label=\"using auth0 as authentication for the todo app permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Using auth0 as authentication for the todo app</strong></h2>\n<p>auth0 is a universal authentication and authorization platform.</p>\n<p>To add auth0 to your React app, we will perform the following steps:<br>\n1. Sign up on <a href=\"https://auth0.com\">https://auth0.com</a> and create a new application.<br>\n2. Add a callback URL in auth0 console.<br>\n3. Create an Auth class<br>\n4. Create history.js<br>\n5. Create a Callback component<br>\n6. Create routes<br>\n7. Change App.js to include auth urls<br>\n8. Render routes instead of App js</p>\n<p>Sign up on <a href=\"https://auth0.com\">https://auth0.com</a> and create a new application for your react app. Provide a relevant name to your auth0 application and head over to the settings tab to configure it with your react app.</p>\n<p>In settings under <code class=\"language-text\">Allowed Callback Urls</code> add <code class=\"language-text\">http://localhost:3000/callback</code> as it will be the callback URL on dev environment after authentication completes.</p>\n<p>Now install auth0 in your react app by executing <code class=\"language-text\">yarn add auth0-js</code>.<br>\nauth0 has a great <a href=\"https://auth0.com/docs/quickstart/spa/react/01-login\">react quick start documentation</a> written on their website to include auth0 in your react app.</p>\n<p>Create a new file in <code class=\"language-text\">src/Auth/</code>as <code class=\"language-text\">Auth.js</code>. We’ll be creating an <code class=\"language-text\">Auth</code> class which will handle the authentication.</p>\n<p>Copy your auth0 <code class=\"language-text\">clientID</code> from your auth0 application and paste it in <code class=\"language-text\">Auth.js</code>. If you are following from auth0 docs then make sure to add <code class=\"language-text\">localStorage.setItem(&#39;sub&#39;, authResult.idTokenPayload.sub)</code> in <code class=\"language-text\">setSession()</code> function and <code class=\"language-text\">localStorage.removeItem(&#39;sub&#39;, authResult.idTokenPayload.sub)</code> in <code class=\"language-text\">logout()</code> function. This will store the user id in local storage.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> createHistory <span class=\"token keyword\">from</span> <span class=\"token string\">'history/createBrowserHistory'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">createHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Create a file <code class=\"language-text\">history.js</code> and make its content as an image. Also change <code class=\"language-text\">App.js</code> to include login, logout, and home buttons.</p>\n<p><img src=\"https://miro.medium.com/max/3513/1*wI_nIy7mNGUbVU4bydVW6g.png\"></p>\n<center>Auth.js and App.js</center>\n<p>Create a <code class=\"language-text\">callback.js</code> component which will be shown to the user when authorisation is completed.</p>\n<p>Create a <code class=\"language-text\">routes.js</code> to include different routes on which different components will be shown and a route on which authorisation will take place.<br>\nThe content for all the files can be found on <a href=\"https://auth0.com/docs/quickstart/spa/react/01-login\">auth0 react quick start documentation.</a></p>\n<h2 id=\"writing-queries-in-graphql\"><a href=\"#writing-queries-in-graphql\" aria-label=\"writing queries in graphql permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Writing queries in GraphQL</strong></h2>\n<p>There are 3 different types of queries in GraphQL — query, mutation and subscription. GET requests are completed by the “query” while insert, delete and update queries are completed by “mutation”. Subscription listens to any change in event happening, for instance if a new entry is added to a table then through a subscription, it can be notified. This prevents using a GET query all over again.</p>\n<p>Create a new table on Hasura API Explorer named <code class=\"language-text\">todos</code>. It will have the following fields:<br>\n1. todo_id: Integer (auto increment)<br>\n2. todo_text: Text<br>\n3. todo_mark: Boolean<br>\n4. todo_user: Text</p>\n<ul>\n<li>todo_id will be the todo number which will automatically increment on every new creation.</li>\n<li>todo_text will store the text of todo.</li>\n<li>todo_mark is a field which will be true if the todo has been completed and false in case it hasn’t been completed.</li>\n<li>todo_user will store the user id of the user logged in.</li>\n</ul>\n<p><img src=\"https://miro.medium.com/max/2400/1*W5Sz7JiAmHAYGYjZNuN2kg.png\"></p>\n<center>Creating a table on Hasura</center>\n<p>Add table permissions so that every user can access only its data.</p>\n<ol>\n<li>Create a new <code class=\"language-text\">role</code> user.</li>\n<li>For <code class=\"language-text\">insert</code> chose <code class=\"language-text\">with custom checks</code>Select <code class=\"language-text\">todo_user</code> as the field, make it <code class=\"language-text\">_eq</code> to <code class=\"language-text\">X-HASURA-USER-ID</code></li>\n<li>For <code class=\"language-text\">select</code> chose <code class=\"language-text\">with same checks as ----</code> and select all columns for access.</li>\n<li>For <code class=\"language-text\">update</code> chose <code class=\"language-text\">with same checks as ----</code> and give access only to <code class=\"language-text\">todo_mark</code> column.</li>\n<li>For <code class=\"language-text\">delete</code> chose <code class=\"language-text\">with same checks as ----</code>.</li>\n</ol>\n<p><img src=\"https://miro.medium.com/max/2400/1*98HSDzrNrIFu55YjQIe9lQ.png\"></p>\n<h2 id=\"writing-a-get-query\"><a href=\"#writing-a-get-query\" aria-label=\"writing a get query permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Writing a GET query</strong></h2>\n<p>Writing queries in GraphQL is easy. Specify the table name then the fields you want to be in the response. If you want to do a selective search then an <code class=\"language-text\">order_by</code> can be provided after the table name specification.</p>\n<p>A sample query to get all the values in todos table is as follow:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token punctuation\">{</span>  \n    todos<span class=\"token punctuation\">{</span>  \n       todo_id  \n       todo_text  \n       todo_mark  \n       todo_user  \n    <span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The general format for a query is:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> query_name <span class=\"token punctuation\">{</span>  \n table_name <span class=\"token punctuation\">(</span>where<span class=\"token punctuation\">,</span> orderby or pagination expression<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">{</span>  \n table fields in response  \n <span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"writing-a-mutation\"><a href=\"#writing-a-mutation\" aria-label=\"writing a mutation permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Writing a mutation</strong></h2>\n<p>Mutation consists of Insert, Update, and Deletions. The general format for writing a mutation query is:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token keyword\">mutation</span>-name <span class=\"token punctuation\">{</span>  \n  <span class=\"token keyword\">mutation</span>-type_table-name <span class=\"token punctuation\">(</span>  \n    expressions to identify row and changing data  \n  <span class=\"token punctuation\">)</span>  \n  affected_rows  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>A simple insert query for todos table will look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>  \n    insert_todos<span class=\"token punctuation\">(</span>  \n        <span class=\"token attr-name\">objects</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>  \n            <span class=\"token punctuation\">{</span>  \n              <span class=\"token attr-name\">todo_text</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Complete react app\"</span><span class=\"token punctuation\">,</span>  \n              <span class=\"token attr-name\">todo_user</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"auth0|20390123821398\"</span>  \n            <span class=\"token punctuation\">}</span>  \n        <span class=\"token punctuation\">]</span>  \n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>  \n       affected_rows  \n     <span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>A simple update query for todos table will look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>  \n    update_todos<span class=\"token punctuation\">(</span>  \n        <span class=\"token attr-name\">where</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">todo_id</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">_eq</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>  \n        <span class=\"token attr-name\">_set</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">todo_mark</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span>  \n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>  \n       affected_rows  \n     <span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>A simple delete query for todos table will look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>  \n    delete_todos<span class=\"token punctuation\">(</span>  \n        <span class=\"token attr-name\">where</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">todo_id</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">_eq</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>  \n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>  \n       affected_rows  \n    <span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now we are ready to create the frontend using React and the query the database to create and utilise todos.</p>\n<h2 id=\"coding-the-frontend-using-react\"><a href=\"#coding-the-frontend-using-react\" aria-label=\"coding the frontend using react permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Coding the frontend using React</strong></h2>\n<p>We’ll be using React Apollo Client to interact with the GraphQL server and make queries. Install apollo client using <code class=\"language-text\">npm install apollo-boost react-apollo graphql --save</code> or <code class=\"language-text\">yarn add apollo-boost react-apollo graphql</code>.</p>\n<p>There will be the following main components:<br>\n1. One parent component wrapping all the components in the apollo provider component.<br>\n2. GetTodos component to display all the pending todos to the user.<br>\n3. AddTodos component to add a todo.<br>\n4. MarkTodo component to mark a todo as completed.<br>\n5. DeleteTodo component to delete a todo.<br>\n6. GetAllTodos component to fetch all the todos created till now for a user.</p>\n<ol>\n<li><code class=\"language-text\">Home.js</code> The parent component.<br>\nThis component will act as a parent component for all other components, we’ll wrap the child component in an <code class=\"language-text\">ApolloProvider</code> which will enable us to use apollo client to make GraphQL queries in the complete app. ApolloProvider requires a <code class=\"language-text\">client</code> prop with a <code class=\"language-text\">ApolloClient</code> object. This allows us to make authorised requests. Import ApolloClient from apollo-boost and ApolloProvider from react-apollo. Create a ApolloClient object as follows<br>\nTo use user authentication, pass the user access token in the headers as Authorization. This will let the Hasura know which user is sending a request to the GraphQL server. A separate authentication webhook needs to be deployed to allow token authentication. Deploy the webhook to Heroku or any other service. It’s easy to deploy using Heroku one-click deploy. After that configure the <code class=\"language-text\">HASURA_GRAPHQL_AUTH_HOOK</code> environment variable in your Hasura Server to your deployed webhook URL. Use <code class=\"language-text\">/auth0/webhook</code>for auth0 authentication.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">ACCESS_TOKEN</span> <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'access_token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  uri<span class=\"token punctuation\">:</span> <span class=\"token string\">\"GraphQL server url endpoint\"</span><span class=\"token punctuation\">,</span>\n  headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    Authorization<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Bearer </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">ACCESS_TOKEN</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Home</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> isAuthenticated <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token function\">isAuthenticated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>ApolloProvider client<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>client<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"container\"</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>GetTodos <span class=\"token operator\">/</span><span class=\"token operator\">></span>           \n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ApolloProvider<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Home<span class=\"token punctuation\">;</span></code></pre></div>\n<p>2. <code class=\"language-text\">GetTodos</code> will fetch all the incomplete todos from the database and display them to the user. This component requires the use of React Apollo’s Query component. We first need to write a GraphQL query to fetch all the incomplete todos from todos table. The method to write a query remains the same as explained above. In react, you need to enclose that query in <code class=\"language-text\">gql``</code>. gql is imported from graphql-tag which lets the apollo client know that the text enclosed within this text is a GraphQL query. To keep the code clean, we’ll create a <code class=\"language-text\">queries.js</code> and write all the GraphQL queries in it.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> getIncompleteTodos <span class=\"token operator\">=</span> gql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">{\n    todos(\n        where: {todo_mark: {_eq:false}}\n    ){\n        todo_id\n        todo_text\n        todo_mark\n        todo_user\n    }\n}</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>We’ll use this query to fetch all the incomplete todos. In GetTodos component, we’ll be using Apollo’s Query Tag. Create a Apollo Query and pass the graphql query in it as a <code class=\"language-text\">query</code> prop. A function inside the Query component will check for the query’s current state (loading), error if present and the data on completion. The data will have all the todos in it, we’ll just iterate over the data and display the relevant content to the user. There should be an option to mark the todo as completed or delete the todo, so we’ll create those components and render along side the data recevied. Finally after all the todos are rendered we’ll give the user an option to add a new todo, we’ll create an AddTodo component for the same and render it next to the Todos shown to the user.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">GetTodos</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Query query<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>getIncompleteTodos<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> loading<span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">,</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>loading<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>Loading<span class=\"token operator\">...</span> <span class=\"token operator\">&lt;</span>FontAwesomeIcon icon<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>faSpinner<span class=\"token punctuation\">}</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> color<span class=\"token punctuation\">:</span> <span class=\"token string\">'blue'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> spin <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error! fetching todos, trying again. </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span><span class=\"token function\">reload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span>No Todos Created Yet<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>AddTodos <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>Grid<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>Row<span class=\"token operator\">></span>\n                            <span class=\"token operator\">&lt;</span>Col md<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">8</span><span class=\"token punctuation\">}</span> mdPush<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                                <span class=\"token operator\">&lt;</span>ListGroup<span class=\"token operator\">></span>\n                                    <span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n                                        <span class=\"token operator\">&lt;</span>ListGroupItem<span class=\"token operator\">></span>\n                                            <span class=\"token operator\">&lt;</span>ButtonGroup className<span class=\"token operator\">=</span><span class=\"token string\">\"pull-right\"</span><span class=\"token operator\">></span>\n                                                <span class=\"token operator\">&lt;</span>MarkTodo todo_id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>todo_id<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                                                <span class=\"token operator\">&lt;</span>DeleteTodo todo_id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>todo_id<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                                            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ButtonGroup<span class=\"token operator\">></span>\n                                            <span class=\"token operator\">&lt;</span>h4<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>count <span class=\"token operator\">=</span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>todo_text<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h4<span class=\"token operator\">></span>\n                                        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ListGroupItem<span class=\"token operator\">></span>\n                                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n                                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ListGroup<span class=\"token operator\">></span>\n                                <span class=\"token operator\">&lt;</span>ListGroup<span class=\"token operator\">></span>\n                                    <span class=\"token operator\">&lt;</span>ListGroupItem<span class=\"token operator\">></span>\n                                        <span class=\"token operator\">&lt;</span>AddTodos <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ListGroupItem<span class=\"token operator\">></span>\n                                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ListGroup<span class=\"token operator\">></span>\n                            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Col<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Row<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Grid<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Query<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>3. AddTodo component will be used to send an insert request to the hasura graphql server to add a new todo entry in the database. This component will require the use of graphql’s mutation request and Apollo’s Mutation Component.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> addTodo <span class=\"token operator\">=</span> gql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    mutation($todo_text: String!, $todo_user: String!) {\n        insert_todos(\n            objects: [\n                {\n                  todo_text: $todo_text,\n                  todo_user: $todo_user\n                }\n              ]\n          ){\n            affected_rows\n          }\n    }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Here we will be using variables in the mutation query which will be received from Apollo’s Mutation component. This component will consist of a form which will take the todo_text input from the user and send that to the mutation query as a variable. Create a Mutation component and pass the name of GraphQL query in mutation prop. Inside a mutation is a function with 2 arguments, the first one being the type of mutation and second being an optional data. Insert type of mutation requires <code class=\"language-text\">todo_text</code> and <code class=\"language-text\">todo_user</code> as a variable. Any extra data to be sent along the query is included in a dictionary.</p>\n<p>All the variables are included in a dictionary with variable name as key and its value as dictionary. This variable dictionary is assigned to a variables key in the extra data dictionary. A mutation changes the state of the database, this means if we add a new todo to the database then it should be shown to the user in the list of incomplete todos. This is achieved by <code class=\"language-text\">refetchQueries</code>. <code class=\"language-text\">refetchQueries</code> is a list of dictionaries with each dictionary containing the name of query to execute on mutation completion. We’ll refetch all the todos whenever a new todo is added to the database.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">AddTodos</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">addtodo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">insert_todos</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> todo_user <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sub'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> todo_user<span class=\"token punctuation\">:</span> todo_user <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">insert_todos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> variables<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">,</span> refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> query<span class=\"token punctuation\">:</span> getIncompleteTodos <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">:</span> getAllTodos<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>Mutation mutation<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>addTodo<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">insert_todos<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token operator\">&lt;</span>Form\n                        onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                            e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addtodo</span><span class=\"token punctuation\">(</span>insert_todos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                    <span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>FormGroup controlId<span class=\"token operator\">=</span><span class=\"token string\">\"Createtodo\"</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token string\">'margin-bottom'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'0px'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                            <span class=\"token operator\">&lt;</span>InputGroup<span class=\"token operator\">></span>\n                            <span class=\"token operator\">&lt;</span>FormControl\n                                type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span>\n                                value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>todo_text<span class=\"token punctuation\">}</span>\n                                placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"Create a todo task.\"</span>\n                                onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> todo_text<span class=\"token punctuation\">:</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n                          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                          <span class=\"token operator\">&lt;</span>InputGroup<span class=\"token punctuation\">.</span>Button<span class=\"token operator\">></span>\n                          <span class=\"token operator\">&lt;</span>Button type<span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>FontAwesomeIcon icon<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>faPlus<span class=\"token punctuation\">}</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> color<span class=\"token punctuation\">:</span> <span class=\"token string\">'blue'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\n                          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>InputGroup<span class=\"token punctuation\">.</span>Button<span class=\"token operator\">></span>\n                          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>InputGroup<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>FormGroup<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Form<span class=\"token operator\">></span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Mutation<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>4. MarkTodo component will be used to send an update request to the database for a particular todo to change its todo_mark value from <code class=\"language-text\">false</code> to <code class=\"language-text\">true</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> markTodo <span class=\"token operator\">=</span> gql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    mutation($todo_id: Int!) {\n        update_todos(\n            where: {todo_id: {_eq: $todo_id}} \n            _set: {todo_mark: true}\n            ){\n            affected_rows\n          }\n    }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In the MarkTodo component, Create a Mutation component and pass the name of graphql query in mutation prop. MarkTodo component is similar to AddTodos except that AddTodo inserts a new entry while MarkTodo updates an exisiting entry in the database.</p>\n<p>Pass the id of todo as a variable to update mutation so that the todo_mark value can be changed in the database. Refetch all the todos on mutation completion.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MarkTodo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">marktodo_completed</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">update_todos</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">update_todos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> variables<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">,</span> refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> query<span class=\"token punctuation\">:</span> getIncompleteTodos <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> query<span class=\"token punctuation\">:</span> getAllTodos <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>Mutation mutation<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>markTodo<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">update_todos<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token operator\">&lt;</span>Button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                        e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">marktodo_completed</span><span class=\"token punctuation\">(</span>update_todos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>FontAwesomeIcon icon<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>faCheck<span class=\"token punctuation\">}</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> color<span class=\"token punctuation\">:</span> <span class=\"token string\">'green'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Mutation<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>5. In the same way as MarkTodo, we’ll create a DeleteTodo component. This will allow a user to delete the todo completely from the database. Everything will be same as in MarkTodo except that we’ll use delete_todos as type of mutation.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> deleteTodo <span class=\"token operator\">=</span> gql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    mutation($todo_id: Int!) {\n        delete_todos(\n            where: {todo_id: {_eq:$todo_id}}\n        ){\n            affected_rows\n        }\n    }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DeleteTodo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">deletetodo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">delete_todos</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">delete_todos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> variables<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">,</span> refetchQueries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> query<span class=\"token punctuation\">:</span> getIncompleteTodos <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> query<span class=\"token punctuation\">:</span> getAllTodos <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>Mutation mutation<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>deleteTodo<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">delete_todos<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token operator\">&lt;</span>Button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                        e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">deletetodo</span><span class=\"token punctuation\">(</span>delete_todos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>  <span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>FontAwesomeIcon icon<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>faTimes<span class=\"token punctuation\">}</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> color<span class=\"token punctuation\">:</span> <span class=\"token string\">'red'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Mutation<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>6. Finally we’ll create a GetAllTodos component to show users all the todos he has created till now. It will consist of both completed and non completed todos. This component will use a GET query on the todos table and we’ll order the todos by most recently created non completed todos first. Using conditional rendering in react we can style the incomplete todos and completed todos differently.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> getAllTodos <span class=\"token operator\">=</span> gql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">{\n    todos(order_by: [todo_mark_asc,todo_id_desc]){\n        todo_id\n        todo_text\n        todo_mark\n        todo_user\n    }\n}</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GetAllTodos</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> isAuthenticated <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">isAuthenticated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>ApolloProvider client<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>client<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"container\"</span><span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>h2 style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token string\">'text-align'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'center'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>All Todos<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>h3 style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token string\">'text-align'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'center'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Todos <span class=\"token keyword\">in</span> Green Are Completed <span class=\"token keyword\">while</span> <span class=\"token keyword\">in</span> Red are Pending<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>Grid<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>Row<span class=\"token operator\">></span>\n                            <span class=\"token operator\">&lt;</span>Col md<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">8</span><span class=\"token punctuation\">}</span> mdPush<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                                <span class=\"token operator\">&lt;</span>Query query<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>getAllTodos<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                                    <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> loading<span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">,</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                                        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>loading<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>Loading<span class=\"token operator\">...</span> <span class=\"token operator\">&lt;</span>FontAwesomeIcon icon<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>faSpinner<span class=\"token punctuation\">}</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> color<span class=\"token punctuation\">:</span> <span class=\"token string\">'blue'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> spin <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error fetching todos, trying again. </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span><span class=\"token function\">reload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                        <span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n                                        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                                            <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n                                                <span class=\"token operator\">&lt;</span>ListGroup<span class=\"token operator\">></span>\n                                                    <span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n                                                        <span class=\"token operator\">&lt;</span>ListGroupItem bsStyle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">.</span>todo_mark <span class=\"token operator\">?</span> <span class=\"token string\">'success'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'danger'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                                                            <span class=\"token operator\">&lt;</span>ButtonGroup className<span class=\"token operator\">=</span><span class=\"token string\">\"pull-right\"</span><span class=\"token operator\">></span>\n                                                                <span class=\"token punctuation\">{</span>\n                                                                    <span class=\"token operator\">!</span>todo<span class=\"token punctuation\">.</span>todo_mark <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                                                                        <span class=\"token operator\">&lt;</span>MarkTodo todo_id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>todo_id<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                                                                    <span class=\"token punctuation\">)</span>\n                                                                <span class=\"token punctuation\">}</span>\n                                                                <span class=\"token operator\">&lt;</span>DeleteTodo todo_id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>todo_id<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                                                            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ButtonGroup<span class=\"token operator\">></span>\n                                                            <span class=\"token operator\">&lt;</span>h4<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>count <span class=\"token operator\">=</span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>todo_text<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h4<span class=\"token operator\">></span>\n                                                        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ListGroupItem<span class=\"token operator\">></span>\n                                                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n                                                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ListGroup<span class=\"token operator\">></span>\n                                            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n                                        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Query<span class=\"token operator\">></span>\n                            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Col<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Row<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Grid<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ApolloProvider<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<center>GetAllTodos Component and Query</center>\n<p>Run the server using <code class=\"language-text\">yarn start</code>. Head over to <a href=\"http://localhost:3000\">http://localhost:3000</a> to test your app.</p>\n<h2 id=\"final-words\"><a href=\"#final-words\" aria-label=\"final words permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Final Words</h2>\n<p>And that’s it, it’s that easy to create a React Todo App with Hasura Graphql Engine. You can extend it to include more features and a better look and feel. Deploy your react app to Heroku or any other hosting service so that everyone over the internet can use it.</p>\n<p>You can find the source code for this blog <a href=\"https://github.com/Anupam-dagar/react-Hasura-todo\">here</a>.</p>\n<p>Keep Coding!!!</p>\n<p>Useful Resources used while creating the todo app:<br>\n1. <a href=\"https://docs.hasura.io/1.0/graphql/manual/index.html\">Hasura GraphQL Engine Documentation</a><br>\n2. <a href=\"https://www.apollographql.com/docs/react/\">React Apollo GraphQL Documentation</a><br>\n3. <a href=\"https://www.apollographql.com/docs/react/\">Auth0 React Quickstart</a><br>\n4. <a href=\"https://graphql.org/learn/\">Official GraphQL Documentation</a></p>"},"primaryTag":{"name":"GraphQL","color":"#007acc"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"postId":"cc5e8942-1791-55e4-bed4-ad42430dc7a6","primaryTag":"GraphQL"}}}